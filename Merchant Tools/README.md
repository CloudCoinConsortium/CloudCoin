# Accepting CloudCoins Automatically

You can receive and send CloudCoins by either using CloudBank or Skywallet. CloudBank runs on your desktop or server while Skywallet is in the Cloud. The CloudBank provides 100% anonymous transactions but is less convenient. Skywallet provides pseudo-privacy that is like crypto but unlike crypto, Skywallet transactions are not public. This means that the only people who could possibly see your SkyWallet Transactions are RAIDA Administrators. SkyWallet makes sending and receiving payments very convenient. 


## Receiving Payments the Easiest Way
The easiest way to receive and confirm payment is by having your customers send CloudCoins to your SkyWallet account and then call the "View_Receipt" service to verify that they sent the payment. The customer can use their CloudBank Wallet or the SkyWallet ATM to send payment. 

SAMPLE CALL TO VIEW RECEIPT
```
https://raida7.cloudcoin.global/service/view_receipt?account=554452&tag=623e88186f3c4a4694c02230abe72666
```

SAMPLE RESPONSE FROM SKYWALLET
```
{
	"server": "raida18",
	"total_received": 454,
	"serial_numbers": "1308799, 1308800, 1308868, 1308983, 14339990, 14340140, 16458252",
	"version": "2020-02-13",
	"time": "2020-04-20 23:31:40",
	"execution_time": 0.0022211554454
}
```

PARAMETERS
tag: guid used in the memo of the transaction (MUST BE A GUID). 
account: Serial Number of your SkyWallet ID coin.

NOTES ON PARAMETERS
Tag: The guid can be generated by your customer or you can tell the customer what the guid will be.  

Account: You can get this by looking in the ID folder on your CloudCoin Wallet and then opening your ID coin in a text editor. You must first have a SkyWallet account which can be created using the CloudCoin Wallet. To make things easier, we convert these numbers into IP addresses and then store them on DNS servers so that we can use friendly names that are easy to use and provide confidence in transactions. For example, if you owned Walmart, you would want to want to convert your skyWallet account number to an IP and put it on Walmart DNS servers. So then your user SkyWallet account may be "payments.Walmart.com" and this would translate to IP address 1.232.70.172. If you convert that IP address to a decimal, it becomes 15222444. Because only you have access to the Walmart DNS servers, it proves that Walmart is the owner of account 15222444 and that it is safe to send money there.   

EVALUATING RAIDA RESPONSES
You must call the "view_receipt" service on 25 RAIDA in parallel. As a simple rule, you need 20 responses confirming the total to be certain that you received payment. However, if you use "Advanced Grading"  you can be safe with 16 positive responses.  

REFERENCE
https://github.com/CloudCoinConsortium/CloudCoin/blob/master/SkyWallet%20Protocol/README.md#viewreceipt

## Sending Coins The Easiest Way

Your customers may want to download coins from your website. Or they might want to receive them in an email. If they have a Skywallet Account, they may like to have them sent there. 

The easyist way is to send Coins to your customers is to setup a CloudCoin Wallet on a desktop computer or server and enable CloudBank RPC (Remote Procedure Calls). This allows your web servers to command your wallet to give it a stack of CloudCoins.You can then put these coins on your website and email the coins to your customers. 

SAMPLE REQUEST FOR A STACK OF COINS
```
https://195.45.84.78:33/service/withdraw_one_stack?amount=254&pk=ef50088c8218afe53ce2ec&account=532fe9e5dc3932650cfa
```
SAMPLE REQUEST FOR A STACK OF COINS FOR WALLET THAT IS ENCRYPTED IN THE WALLET
```
https://195.45.84.78:33/service/withdraw_one_stack?amount=254&pk=ef50088c8218afe53ce2ec&account=532fe9e5dc3932650cfa&ek=1170b354e097f2d
```
SAMPLE REQUEST WITH OPTIONAL MEMO
```
https://195.45.84.78:33/service/withdraw_one_stack?amount=254&pk=ef50088c8218afe53ce2ec&account=532fe9e5dc3932650cfa&memo=TransactionNo887734
```
SAMPLE RESPONSE IF GOOD
```
{
	"cloudcoin": [
		{ 
		"nn":"1", 
		"sn":"1112240", 
		"an": ["f5a52ee881daaae548c24a8eaff7176c", "415c2375a6fa48c4661f5af8d7c95541", "73e067b7b47c1556deebdca33f9a09fb", "9b90d265d102a565a702813fa2211f54", "e3e191ca987c8010a3adc49c6fc18417",
			"baa7578e207b7cfaa0b8336d7ed4a4f8", "6d8a5c66a589532fe9e5dc3932650cfa", "1170b354e097f2d90132869631409bd3", "b7bc83e8ee7529ff9f874866b901cf15", "a37f6c4af8fbcfbc4d77880fc29ddfbc",
			"277668208e9bafd9393aebd36945a2c3", "ef50088c8218afe53ce2ecd655c2c786", "b7bbb01fbe6c3a830a17bd9a842b46c0", "737360e18596d74d784f563ca729aaea", "e054a34f2790fd3353ea26e5d92d9d2f",
			"7051afef36dc388e65e982bc853be417", "ea22cbae0394f6c6918691f2e2f2e267", "95d1278f54b5daca5898c62f267b6364", "b98560e11b7142d1addf5b9cf32898da", "e325f615f93ed682c7aadf6b2d77c17a",
			"3e8f9d74290fe31d416b90db3a0d2ab1", "c92d1656ded0a4f68e5171c8331e0aea", "7a9cee66544934965bca0c0cb582ba73", "7a55437fa98c1b10d7f47d84f9accdf0", "c3577cced2d428f205355522bc1119b6"],
		"ed":"7-2019",
		"pown":"ppppppppppppppppppppppppp",
		"aoid": []
		},
		{ 
		"nn":"1", 
		"sn":"1112241", 
		"an": ["f5a52ee881daaae548c24a8eaff7176c", "415c2375a6fa48c4661f5af8d7c95541", "73e067b7b47c1556deebdca33f9a09fb", "9b90d265d102a565a702813fa2211f54", "e3e191ca987c8010a3adc49c6fc18417",
			"baa7578e207b7cfaa0b8336d7ed4a4f8", "6d8a5c66a589532fe9e5dc3932650cfa", "1170b354e097f2d90132869631409bd3", "b7bc83e8ee7529ff9f874866b901cf15", "a37f6c4af8fbcfbc4d77880fc29ddfbc",
			"277668208e9bafd9393aebd36945a2c3", "ef50088c8218afe53ce2ecd655c2c786", "b7bbb01fbe6c3a830a17bd9a842b46c0", "737360e18596d74d784f563ca729aaea", "e054a34f2790fd3353ea26e5d92d9d2f",
			"7051afef36dc388e65e982bc853be417", "ea22cbae0394f6c6918691f2e2f2e267", "95d1278f54b5daca5898c62f267b6364", "b98560e11b7142d1addf5b9cf32898da", "e325f615f93ed682c7aadf6b2d77c17a",
			"3e8f9d74290fe31d416b90db3a0d2ab1", "c92d1656ded0a4f68e5171c8331e0aea", "7a9cee66544934965bca0c0cb582ba73", "7a55437fa98c1b10d7f47d84f9accdf0", "c3577cced2d428f205355522bc1119b6"],
		"ed":"7-2019",
		"pown":"ppppppppppppppppppppppppp",
		"aoid": []
		}

	]
}
```
REQUIRED PARAMETERS

amount: The amount of CloudCoins to be returned in the stack.

pk: The password that your CloudBank has generated for you. 

account: The account ID that your CloudBank has generated for you.

OPTIONAL   PARAMETERS

ek: The password used to decrypt your CloudCoin Wallet. 

memo: A note that will be placed in the transaction file. 


REFERENCE:
https://github.com/CloudCoinConsortium/CloudBank-V2#withdraw-one-stack-service

Your Wallet will automatically make change if needed. You can put your CloudCoin Wallet on a server located in a physically secure place (like your home). You can even have lots of CloudCoin Wallets are different machines around the world to mitigate the risk of theft. You can encrypt your Wallet so that the person who is the custodian/administrator of the CloudCoin Wallet does not have the ability to take them. In the future, the CloudCoin Wallet with CloudBank will allow you to configure limits on sending money, restrictions on who can request money, times of day that money can be sent and even if you want manual confirmation.

so that your web server can put them on a web page for easy download. Then your customers can download their coins in stack format over a secure SSL connection provided by HTTPS. 

Sending CloudCoins to customers from you SkyWallet account is very easy if you are doing it manually. You can just open CloudCoin Wallet and send the coins. The easist way to send coins progromatically is by leveraging your CloudCoin Wallet and sending it RPC (Remote Procedure Calls) telling it to send or transfer coins. 

is more complicated because it is up to the account holder to coordinate all the RAIDA. You may first need to make change. Then you will need to get all the serial numbers from all 25 RAIDA and analyse them. This happens very fast but it is better to let an API do this. 


## Sending Coins Via CloudBank

If you will need to send coins, the easit way is to setup a CloudCoin Wallet on a desktop computer or server and enable CloudBank RPC (Remote Procedure Calls). This allows your web servers to command your wallet to give it coins so that your web server can put them on a web page for easy download. Then your customers can download their coins in stack format over a secure SSL connection provided by HTTPS. 





There are two ways You can use the "view_receipt" web service to confirm that you have recieved payments. You can use CloudBank to 


Your web servers can send and receive CloudCoins and confirm that they are authentic. There are a few techniques to do this. Here we will talk about the most relyable  so that you can fill orders automatically. Your customers will send CloudCoins to your Skywallet using their CloudCoin Wallet or other system such as the SkyWallet ATM. 

## SETUP

You will need a Webserver/Application, a Depository Server and a SkyWallet account. 

### Creating a Depository using CloudBank Software
You will need to have a place to store your CloudCoins that is publically avalable and secure. We suggest setting up a computer at your home that is physically secure. This Depository can be placed on any desktop computer that will be left one. 

Deposit:


After transfering money to your SkyWallet, your customers will need to send your servers a message specifying what they bought, how many CloudCoins they sent you, and what the "memo" was. 

Your servers will then "verify paymnet" to check your Skywallet to see if you received a transfer of that amount with the same memo.

Your server can call on our Payment Verifier exe to do all the work. Just tell the Payment Verifier, the amount, memo and a few other details. The Payment Verifier will return a true or false. 

The Payment Verifier is a executable program that runs on either Windows, Linux or Mac. It can be called from any langague that is able to call executables such as PHP, C#, JAVA, C++, Ruby, almost anything! 

The Payment Verifier is here in this Github folder. 

# Sending CloudCoins Automatically

You can send Cloudcoins quickly and reliably to your customer's Skywallet address by transferring them from your Skywallet account. 

You can call on our Transferrer executable to send the coins.  

The Transferrer is here in this Github folder. 

# Echoing the RAIDA

Before you verify payments or transfer funds, you may want to echo the RAIDA to make sure you hae connectivity. If you have a dependable Internet connection with no routers that block your ports, you will not need to echo. 

